name: Build

on: [push]

jobs:
  lint:
    runs-on: ubuntu-latest
    name: Lint + Static Analysis
    steps:
    - uses: actions/checkout@v4
    - name: Set up Python 3.10
      uses: actions/setup-python@v5
      with:
        python-version: 3.10.X
        cache: pip
        cache-dependency-path: .venv
    - name: Install
      run: make
    - name: Lint
      run: make lint

  # test:
  #   runs-on: ubuntu-latest
  #   name: Test Implemented Functionality
  #   steps:
  #   - uses: actions/checkout@v4
  #   - name: Set up Python 3.10
  #     uses: actions/setup-python@v5
  #     with:
  #       python-version: 3.10.X
  #       cache: pip
  #       cache-dependency-path: .venv
  #   - name: Install
  #     run: make
  #   - name: Test
  #     run: make test 
  #   - name: Archive test failures
  #     uses: actions/upload-artifact@v4
  #     with:
  #       name: test-failures
  #       path: dist/test/configs
    

  # release:
  #   runs-on: ubuntu-latest
  #   needs: [lint, test]
  #   name: Create Release
  #   steps:
  #   - uses: actions/checkout@v4
  #   - name: Checkout release branch
  #     run: |
  #       git config --global user.email "GHBot@willwalling.com"
  #       git config --global user.name "GH Bot"
  #       git fetch origin
  #       git checkout release
  #       git reset --hard origin/main
  #   - name: Remove object files
  #     run: |
  #       rm -rf .vscode .github configs stubs
  #       rm .gitignore run run-debug test
  #   - name: Commit changes
  #     run: |
  #       git add . 
  #       git commit -m "Remove object files"
  #       git push --force origin release